# 小米路由器mini青春版(R1C)刷OpenWrt教程

## 1. 米家添加路由器

首先初始化小米路由器，然后将路由器设置了**中继模式**,利用手机开启热点，pad下载米家，在pad的米家APP中添加**小米路由器**,自动识别到相应的路径器。

## 2. 重置路由器

在米家添加好的路由器初始化，设置为**路由器模式**，进行wifi和密码的设置。

## 3. 登录路由器

设置**路由模式**的路由器后，进行网线连接，也可以采用wifi连接，连接后在浏览器输入``miwifi.com``，进行路由器管理界面，在界面里查看路由器的版本

## 4. 刷开发版系统

由于需要获取路由器系统的root权限，所以需要将路由器刷为开发版系统。在路由器账户里面选择**系统升级**--**手动升级**-**选择文件夹里下载好的文件``miwifi_r1cm_firmware_2e9b9_2.21.109.bin``,选择升级，等待一段时间。更新完系统后路由器会自动重启，重启后可以再次进入管理后台检查路由器的系统状态。

![kaifabanshuaji](.\pictures\kaifabanshuaji.png)

## 5. 获取ROOT账户密码

登录下面网址``https://d.miwifi.com/rom/ssh``,记录下root账户的密码

## 6. 获取SSH权限

开启路由器的SSH功能，我们就可以使用SSH连接路由器，就可以在上面尽情折腾啦。下面我们开始吧：

1. 请将我们上一步准备的的 **开启SSH工具** bin文件复制到U盘的根目录下，保证文件名为``miwifi_ssh.bin``；
2. 断开小米路由器的电源，将U盘插入USB接口；
3. 按住reset按钮之后接入电源，指示灯变为黄色闪烁时再松开reset键；
4. 等待3-5秒后安装完成之后，小米路由器会自动重启，指示灯变蓝了表示成功。

## 7. 刷入Breed

Breed 是由网友开发的一个号称“不死”的引导加载程序。只要路由器成功刷入 Breed 之后，就可以借助它来备份和刷入路由器固件。我们就是使用 Breed 来刷 openwrt 的。下面开始刷入Breed：

- 1. 用WinSCP建立SCP连接，地址为``192.168.31.1``,用户名:``root``,密码:``之前查看的密码``；

  2. 将``breed.bin``文件复制到 ``/tmp``文件夹下；

  3. 用 XSHELL 连接 小米路由器，输入下面的指令

     ```shell
     mtd -r write /tmp/breed.bin Bootloader
     ```

  4. 等待刷机完成后的界面

  ![breedshuaji](.\pictures\breedshuaji.png)

  5.  出现下面的界面后，将路由器断电，按住reset按钮之后接入电源，指示灯蓝灯闪烁时再松开reset键。

## 8. 刷入OpenWrt系统

breed刷入成功，我们就可以开始刷 openwrt 了：

1. 通过`http://192.168.1.1`，访问breed管理界面
2. 点击“固件备份”，备份固件，以防以后想刷回去；
3. 点击“固件更新”，选中固件，文件选择我们准备工作中的openwrt固件，点击上传；
4. 点击更新；
5. 当更新完成，出现下面的界面后，禁用网卡再启用；
6. 通过`http://192.168.5.1`，访问openwrt管理界面，初始管理密码：password ；
7. 至此，恭喜你！openwrt刷入成功！

## 9.按照下图配置wifi

![0](.\pictures\0.jpg)



### 1. wlan0配置：



![0-1](.\pictures\0-1.jpg)



![0-2](.\pictures\0-2.jpg)



![0-1](.\pictures\0-3.jpg)

![0-1](.\pictures\0-4.jpg)

![0-1](.\pictures\0-5.jpg)

### 2. wlan1配置：

![1-1](.\pictures\1-1.jpg)

![1-1](.\pictures\1-2.jpg)

![1-1](.\pictures\1-3.jpg)

![1-1](.\pictures\1-4.jpg)

![1-1](.\pictures\1-5.jpg)

![1-1](.\pictures\1-6.jpg)

